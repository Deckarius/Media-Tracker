{"ast":null,"code":"import _slicedToArray from\"/Users/miguel/Documents/Github/Media-Tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Header\n * @summary This component defines our site header (nav bar).\n * Contains site branding, page links, and a search bar.\n */import React from'react';import{useState,useEffect}from'react';import{withRouter}from'react-router-dom';import SearchBar from'./SearchBar';import{Navbar,Nav,NavDropdown,Button}from'react-bootstrap';import'bootstrap/dist/css/bootstrap.min.css';import mediaTrackerLogo from'../assets/MediaTrackerLogoDark.png';var brandStyle={color:'whitesmoke',fontWeight:'bold'};var linkStyle={marginRight:15,color:'whitesmoke'};var linkStyleLogin={border:\"1px solid whitesmoke\",borderRadius:5,backgroundColor:'whitesmoke',color:'#4688F1',fontWeight:'bold',marginRight:0,marginLeft:0};var logoStyle={width:40,height:40};var navDropdownStyle={padding:0,backgroundColor:'whitesmoke',borderRadius:5,maxWidth:'fit-content'};var Header=function Header(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];useEffect(function(){// if logged in redirect to profile\nfetch(\"/api/getUserDetails\",{credentials:'include'}).then(function(res){if(res.status===200){setLoggedIn(true);return res.json();}}).then(function(data){setUsername(data.username);}).catch(function(err){// user not logged in, or error\n});},[loggedIn]);var handleLogout=function handleLogout(event){event.preventDefault();fetch(\"/api/logout\",{credentials:'include'}).then(function(res){if(res.status===200){props.history.push('/login');}else{var error=new Error(res.error);throw error;}}).catch(function(err){console.error(err);alert('Error logging out. Please try again.');});};return React.createElement(Navbar,{bg:\"primary\",expand:\"lg\"},React.createElement(Navbar.Brand,{href:\"/\",style:brandStyle},React.createElement(\"img\",{src:mediaTrackerLogo,alt:\"media tracker logo\",style:logoStyle})),React.createElement(Navbar.Brand,{href:\"/\",style:brandStyle},\"Media Tracker\"),React.createElement(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),React.createElement(Navbar.Collapse,{id:\"basic-navbar-nav\"},React.createElement(Nav,{className:\"mr-auto\"},React.createElement(Nav.Link,{href:\"/\",style:linkStyle},\"Home\"),React.createElement(Nav.Link,{href:\"/about\",style:linkStyle},\"About\"),React.createElement(Nav.Link,{href:\"/search\",style:linkStyle},\"Search\")),React.createElement(SearchBar,{className:\"mr-sm-2\"}),!loggedIn?React.createElement(Nav,null,React.createElement(Nav.Link,{href:\"/login\"},React.createElement(Button,{style:linkStyleLogin,size:\"sm\",variant:\"none\"},\"Login\")),React.createElement(Nav.Link,{href:\"/register\"},React.createElement(Button,{style:linkStyleLogin,size:\"sm\",variant:\"none\"},\"Register\"))):React.createElement(NavDropdown,{style:navDropdownStyle,title:username,id:\"basic-nav-dropdown\"},React.createElement(NavDropdown.Item,{href:\"/profile/\"+username},\"Profile\"),React.createElement(NavDropdown.Item,{href:\"/settings\"},\"Settings\"),React.createElement(NavDropdown.Divider,null),React.createElement(NavDropdown.Item,{href:\"\"},React.createElement(Button,{onClick:handleLogout,style:{boxShadow:'none',margin:0,padding:0},size:\"sm\",variant:\"none\"},\"Logout\")))));};export default withRouter(Header);","map":{"version":3,"sources":["/Users/miguel/Documents/Github/Media-Tracker/src/components/Header.js"],"names":["React","useState","useEffect","withRouter","SearchBar","Navbar","Nav","NavDropdown","Button","mediaTrackerLogo","brandStyle","color","fontWeight","linkStyle","marginRight","linkStyleLogin","border","borderRadius","backgroundColor","marginLeft","logoStyle","width","height","navDropdownStyle","padding","maxWidth","Header","props","loggedIn","setLoggedIn","username","setUsername","fetch","credentials","then","res","status","json","data","catch","err","handleLogout","event","preventDefault","history","push","error","Error","console","alert","boxShadow","margin"],"mappings":"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","sourcesContent":["/**\n * Header\n * @summary This component defines our site header (nav bar).\n * Contains site branding, page links, and a search bar.\n */\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport SearchBar from './SearchBar';\nimport { Navbar, Nav, NavDropdown, Button } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport mediaTrackerLogo from '../assets/MediaTrackerLogoDark.png';\n\n\nconst brandStyle = {\n    color: 'whitesmoke',\n    fontWeight: 'bold'\n};\n\nconst linkStyle = {\n    marginRight: 15,\n    color: 'whitesmoke'\n};\n\nconst linkStyleLogin = {\n    border: \"1px solid whitesmoke\",\n    borderRadius: 5,\n    backgroundColor: 'whitesmoke',\n    color: '#4688F1',\n    fontWeight: 'bold',\n    marginRight: 0,\n    marginLeft: 0\n};\n\nconst logoStyle = {\n    width: 40,\n    height: 40\n};\n\nconst navDropdownStyle = {\n    padding: 0,\n    backgroundColor: 'whitesmoke',\n    borderRadius: 5,\n    maxWidth: 'fit-content',\n};\n\nconst Header = props => {\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [username, setUsername] = useState(\"\");\n\n    useEffect(() => {\n        // if logged in redirect to profile\n        fetch(\"/api/getUserDetails\", { credentials: 'include' })\n            .then(res => {\n                if (res.status === 200) {\n                    setLoggedIn(true);\n                    return res.json();\n                }\n            }).then(data => {\n                setUsername(data.username);\n            })\n            .catch(err => {\n                // user not logged in, or error\n            });\n    }, [loggedIn]);\n\n    const handleLogout = event => {\n        event.preventDefault();\n        fetch(\"/api/logout\"\n            , { credentials: 'include' })\n            .then(res => {\n                if (res.status === 200) {\n                    props.history.push('/login');\n                } else {\n                    const error = new Error(res.error);\n                    throw error;\n                }\n            })\n            .catch(err => {\n                console.error(err);\n                alert('Error logging out. Please try again.');\n            });\n    }\n\n    return (\n        <Navbar bg=\"primary\" expand=\"lg\">\n            <Navbar.Brand href=\"/\" style={brandStyle}>\n                <img src={mediaTrackerLogo} alt=\"media tracker logo\" style={logoStyle} />\n            </Navbar.Brand>\n            <Navbar.Brand href=\"/\" style={brandStyle}>Media Tracker</Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"mr-auto\">\n                    <Nav.Link href=\"/\" style={linkStyle}>Home</Nav.Link>\n                    <Nav.Link href=\"/about\" style={linkStyle}>About</Nav.Link>\n                    <Nav.Link href=\"/search\" style={linkStyle}>Search</Nav.Link>\n                </Nav>\n                <SearchBar className=\"mr-sm-2\" />\n                {\n                    !loggedIn ?\n                        (\n                            <Nav>\n                                <Nav.Link href=\"/login\"><Button style={linkStyleLogin} size=\"sm\" variant=\"none\">Login</Button></Nav.Link>\n                                <Nav.Link href=\"/register\"><Button style={linkStyleLogin} size=\"sm\" variant=\"none\">Register</Button></Nav.Link>\n                            </Nav>\n                        )\n                        :\n                        <NavDropdown style={navDropdownStyle} title={username} id=\"basic-nav-dropdown\">\n                            <NavDropdown.Item href={\"/profile/\" + username}>Profile</NavDropdown.Item>\n                            <NavDropdown.Item href=\"/settings\">Settings</NavDropdown.Item>\n                            <NavDropdown.Divider />\n                            <NavDropdown.Item href=\"\"><Button onClick={handleLogout} style={{ boxShadow: 'none', margin: 0, padding: 0 }} size=\"sm\" variant=\"none\">Logout</Button></NavDropdown.Item>\n                        </NavDropdown>\n\n                }\n            </Navbar.Collapse>\n        </Navbar>\n    );\n};\n\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}