{"ast":null,"code":"import _slicedToArray from\"/Users/miguel/Documents/Github/Media-Tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useState,useEffect}from'react';import{Button,FormGroup,FormControl,Form}from'react-bootstrap';import{withRouter}from'react-router-dom';import Layout from'../components/Layout';import'../styles/Login.css';var Login=function Login(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];useEffect(function(){// if logged in redirect to profile\nfetch(\"/api/getUserDetails\",{credentials:'include'}).then(function(res){if(res.status===200){return res.json();}}).then(function(data){props.history.push(\"/profile/\"+data.username);}).catch(function(err){// user not logged in, or error\n});},[]);function validateForm(){return email.length>0&&password.length>0;}function handleSubmit(event){event.preventDefault();fetch(\"/api/auth?email=\"+email+\"&password=\"+password,{credentials:'include'}).then(function(res){if(res.status===200){props.history.push('/');}else{var error=new Error(res.error);throw error;}}).catch(function(err){console.error(err);alert('Error logging in. Please try again.');});}return React.createElement(Layout,null,React.createElement(\"h1\",{style:{borderBottom:'1px solid black'}},\"Login\"),React.createElement(\"div\",{className:\"Login\"},React.createElement(\"form\",{onSubmit:handleSubmit},React.createElement(FormGroup,{controlId:\"email\",bsSize:\"large\"},React.createElement(Form.Label,null,\"Email\"),React.createElement(FormControl,{autoFocus:true,type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})),React.createElement(FormGroup,{controlId:\"password\",bsSize:\"large\"},React.createElement(Form.Label,null,\"Password\"),React.createElement(FormControl,{value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"password\"})),React.createElement(Button,{block:true,bsSize:\"large\",disabled:!validateForm(),type:\"submit\"},\"Login\"))));};export default withRouter(Login);","map":{"version":3,"sources":["/Users/miguel/Documents/Github/Media-Tracker/src/pages/Login.js"],"names":["React","useState","useEffect","Button","FormGroup","FormControl","Form","withRouter","Layout","Login","props","email","setEmail","password","setPassword","fetch","credentials","then","res","status","json","data","history","push","username","catch","err","validateForm","length","handleSubmit","event","preventDefault","error","Error","console","alert","borderBottom","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Button, FormGroup, FormControl, Form } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\nimport Layout from '../components/Layout';\nimport '../styles/Login.css';\n\nconst Login = props => {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    useEffect(() => {\n        // if logged in redirect to profile\n        fetch(\"/api/getUserDetails\", { credentials: 'include' })\n            .then(res => {\n                if (res.status === 200) {\n                    return res.json();\n                }\n            }).then(data => {\n                props.history.push(\"/profile/\" + data.username);\n            })\n            .catch(err => {\n                // user not logged in, or error\n            });\n    }, []);\n\n    function validateForm() {\n        return email.length > 0 && password.length > 0;\n    }\n\n    function handleSubmit(event) {\n        event.preventDefault();\n        fetch(\"/api/auth?email=\" + email + \"&password=\" + password\n            , { credentials: 'include' })\n            .then(res => {\n                if (res.status === 200) {\n                    props.history.push('/');\n                } else {\n                    const error = new Error(res.error);\n                    throw error;\n                }\n            })\n            .catch(err => {\n                console.error(err);\n                alert('Error logging in. Please try again.');\n            });\n    }\n\n    return (\n        <Layout>\n            <h1 style={{ borderBottom: '1px solid black' }}>Login</h1>\n            <div className=\"Login\">\n                <form onSubmit={handleSubmit}>\n                    <FormGroup controlId=\"email\" bsSize=\"large\">\n                        <Form.Label>Email</Form.Label>\n                        <FormControl\n                            autoFocus\n                            type=\"email\"\n                            value={email}\n                            onChange={e => setEmail(e.target.value)}\n                        />\n                    </FormGroup>\n                    <FormGroup controlId=\"password\" bsSize=\"large\">\n                        <Form.Label>Password</Form.Label>\n                        <FormControl\n                            value={password}\n                            onChange={e => setPassword(e.target.value)}\n                            type=\"password\"\n                        />\n                    </FormGroup>\n                    <Button block bsSize=\"large\" disabled={!validateForm()} type=\"submit\">\n                        Login\n                    </Button>\n                </form>\n            </div>\n        </Layout>\n    );\n};\n\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}