{"ast":null,"code":"import _regeneratorRuntime from\"/Users/miguel/Documents/Github/Media-Tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/miguel/Documents/Github/Media-Tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/miguel/Documents/Github/Media-Tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Search\n * @summary This page will display search results.\n * Data for the search request is passed as a query string from the previous page.\n * Will request search results from our server here.\n */import React from'react';import Layout from'../components/Layout';import SearchBar from'../components/SearchBar';import ResultCard from'../components/ResultCard';import{Container,Row,Col,Tabs,Tab,CardColumns}from'react-bootstrap';import{searchByTitle}from'../utils/API';import{useState,useEffect}from'react';import*as qs from'qs';import'bootstrap/dist/css/bootstrap.min.css';import'../styles/Search.css';var Search=function Search(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),results=_useState2[0],setResults=_useState2[1];var query=qs.parse(props.location.search,{ignoreQueryPrefix:true});var title=null;if(query.title)title=query.title.replace(\"&\",\"\");useEffect(function(){var fetchResults=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(title&&typeof title!=='undefined'&&title.replace(/^\\s+/,'').replace(/\\s+$/,'')!=='')){_context.next=7;break;}_context.next=3;return searchByTitle(title);case 3:res=_context.sent;setResults(res.response);_context.next=8;break;case 7:setResults(null);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchResults(){return _ref.apply(this,arguments);};}();fetchResults();},[title]);return React.createElement(Layout,null,React.createElement(Container,null,React.createElement(Row,{style:rowStyle},React.createElement(Col,{style:colStyle},React.createElement(\"h1\",{style:{borderBottom:'1px solid black'}},\"Search\"))),React.createElement(\"br\",null),React.createElement(Row,null,React.createElement(Col,{style:colStyle},React.createElement(SearchBar,{buttonStyle:\"dark\"})),\" \"),React.createElement(\"br\",null),React.createElement(Row,{style:rowStyle},// If no search was made, just '--domain--/search', omit search results section\nresults!==null?React.createElement(Col,{style:colStyle},React.createElement(\"h5\",null,\"Results for:\"),React.createElement(\"p\",null,title),React.createElement(\"div\",null,React.createElement(Tabs,{style:tabsStyle,defaultActiveKey:\"movies\",id:\"results-tab\"},React.createElement(Tab,{stlye:tabStyle,eventKey:\"movies\",title:\"Movies\"},results.movies.length>0?React.createElement(CardColumns,{className:\"card-columns text-center\"},results.movies.map(function(item,index){return React.createElement(ResultCard,{key:index,id:item.id,type:item.media_type,title:item.title,overview:item.overview,release_date:item.release_date,poster:item.poster_path});})):React.createElement(\"p\",null,\"No results\")),React.createElement(Tab,{style:tabStyle,eventKey:\"shows\",title:\"Shows\"},results.shows.length>0?React.createElement(CardColumns,{className:\"card-columns text-center\"},results.shows.map(function(item,index){return React.createElement(ResultCard,{key:index,id:item.id,type:item.media_type,title:item.name,overview:item.overview,release_date:item.first_air_date,poster:item.poster_path});})):React.createElement(\"p\",null,\"No results\"))))):React.createElement(\"div\",null,React.createElement(\"h5\",null,\"Search movies or TV shows!\"),React.createElement(\"p\",null,\"Add titles to your lists to keep track of what you've watched!\"),React.createElement(\"p\",null,\"Powered by \",React.createElement(\"a\",{href:\"https://www.themoviedb.org\",target:\"_blank\",rel:\"noopener noreferrer\"},\"TMDb\"),\".\")))));};var rowStyle={width:'100%'};var colStyle={padding:0,margin:0};var tabsStyle={paddingTop:5,paddingLeft:5,paddingRight:5,paddingBottom:0,borderRadius:5,borderLeft:'1px solid #4688F1',borderRight:'1px solid #4688F1',borderTop:'1px solid #4688F1'};var tabStyle={// for possible future styling\n};export default Search;","map":{"version":3,"sources":["/Users/miguel/Documents/Github/Media-Tracker/src/pages/Search.js"],"names":["React","Layout","SearchBar","ResultCard","Container","Row","Col","Tabs","Tab","CardColumns","searchByTitle","useState","useEffect","qs","Search","props","results","setResults","query","parse","location","search","ignoreQueryPrefix","title","replace","fetchResults","res","response","rowStyle","colStyle","borderBottom","tabsStyle","tabStyle","movies","length","map","item","index","id","media_type","overview","release_date","poster_path","shows","name","first_air_date","width","padding","margin","paddingTop","paddingLeft","paddingRight","paddingBottom","borderRadius","borderLeft","borderRight","borderTop"],"mappings":"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","sourcesContent":["/**\n * Search\n * @summary This page will display search results.\n * Data for the search request is passed as a query string from the previous page.\n * Will request search results from our server here.\n */\n\nimport React from 'react';\nimport Layout from '../components/Layout';\nimport SearchBar from '../components/SearchBar';\nimport ResultCard from '../components/ResultCard';\nimport { Container, Row, Col, Tabs, Tab, CardColumns } from 'react-bootstrap';\nimport { searchByTitle } from '../utils/API';\nimport { useState, useEffect } from 'react';\nimport * as qs from 'qs';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../styles/Search.css'\n\n\nconst Search = props => {\n    const [results, setResults] = useState(null);\n    const query = qs.parse(props.location.search, {\n        ignoreQueryPrefix: true\n    });\n    let title = null;\n    if (query.title)\n        title = query.title.replace(\"&\", \"\");\n\n    useEffect(() => {\n        const fetchResults = async () => {\n            if (title && typeof title !== 'undefined' && title.replace(/^\\s+/, '').replace(/\\s+$/, '') !== '') {\n                const res = await searchByTitle(title);\n                setResults(res.response);\n            } else {\n                setResults(null);\n            }\n        };\n        fetchResults();\n    }, [title]);\n\n    return (\n        <Layout>\n            <Container>\n                <Row style={rowStyle}>\n                    <Col style={colStyle}><h1 style={{ borderBottom: '1px solid black' }}>Search</h1></Col>\n                </Row>\n                <br />\n                <Row>\n                    <Col style={colStyle}><SearchBar buttonStyle='dark' /></Col> {/* ...props to implement child components inheriting size? */}\n                </Row>\n                <br />\n                <Row style={rowStyle}>\n                    {\n                        // If no search was made, just '--domain--/search', omit search results section\n                        results !== null ?\n                            <Col style={colStyle}>\n                                <h5>Results for:</h5>\n\n                                <p>{title}</p>\n                                <div>\n                                    <Tabs style={tabsStyle} defaultActiveKey=\"movies\" id=\"results-tab\">\n                                        <Tab stlye={tabStyle} eventKey=\"movies\" title=\"Movies\">\n                                            {results.movies.length > 0 ?\n                                                <CardColumns className=\"card-columns text-center\">\n                                                    {results.movies.map((item, index) => {\n                                                        return (\n                                                            <ResultCard key={index} id={item.id} type={item.media_type} title={item.title} overview={item.overview} release_date={item.release_date} poster={item.poster_path} />\n                                                        );\n                                                    })\n                                                    }\n                                                </CardColumns>\n                                                :\n                                                <p>No results</p>\n                                            }\n                                        </Tab>\n                                        <Tab style={tabStyle} eventKey=\"shows\" title=\"Shows\">\n                                            {results.shows.length > 0 ?\n                                                <CardColumns className=\"card-columns text-center\">\n                                                    {results.shows.map((item, index) => {\n                                                        return (\n                                                            <ResultCard key={index} id={item.id} type={item.media_type} title={item.name} overview={item.overview} release_date={item.first_air_date} poster={item.poster_path} />\n                                                        );\n                                                    })\n                                                    }\n                                                </CardColumns>\n                                                :\n                                                <p>No results</p>\n                                            }\n                                        </Tab>\n                                    </Tabs>\n                                </div>\n                            </Col>\n                            :\n                            <div>\n                                <h5>Search movies or TV shows!</h5>\n                                <p>Add titles to your lists to keep track of what you've watched!</p>\n                                <p>Powered by <a href=\"https://www.themoviedb.org\" target=\"_blank\" rel=\"noopener noreferrer\">TMDb</a>.</p>\n                            </div>\n                    }\n                </Row>\n            </Container>\n        </Layout>\n    );\n};\n\nconst rowStyle = {\n    width: '100%',\n};\n\nconst colStyle = {\n    padding: 0,\n    margin: 0\n};\n\nconst tabsStyle = {\n    paddingTop: 5,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingBottom: 0,\n    borderRadius: 5,\n    borderLeft: '1px solid #4688F1',\n    borderRight: '1px solid #4688F1',\n    borderTop: '1px solid #4688F1'\n};\n\nconst tabStyle = {\n    // for possible future styling\n};\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}