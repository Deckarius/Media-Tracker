{"ast":null,"code":"import _slicedToArray from \"/Users/miguel/Documents/Github/Media-Tracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/miguel/Documents/Github/Media-Tracker/client/src/components/ResultCard.js\";\nimport React from 'react';\nimport { Card, Button } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\n\nconst ResultCard = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loggedIn = _useState2[0],\n        setLoggedIn = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        username = _useState4[0],\n        setUsername = _useState4[1];\n\n  let id = -1;\n  let type = \"\";\n  let title = \"\";\n  let overview = \"\";\n  let releaseDate = \"\";\n  let posterPath = \"\"; // if logged in redirect to profile\n\n  fetch(\"/api/getUserDetails\", {\n    credentials: 'include'\n  }).then(res => {\n    if (res.status === 200) {\n      setLoggedIn(true);\n      return res.json();\n    }\n  }).then(data => {\n    setUsername(data.username);\n  }).catch(err => {// user not logged in, or error\n  });\n\n  const handleLogout = event => {\n    event.preventDefault();\n    fetch(\"/api/logout\", {\n      credentials: 'include'\n    }).then(res => {\n      if (res.status === 200) {\n        props.history.push('/login');\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).catch(err => {\n      console.error(err);\n      alert('Error logging out. Please try again.');\n    });\n  };\n\n  if (props.id) id = props.id;\n  if (props.type) type = props.type;\n  if (props.title) title = props.title;\n  if (props.overview) overview = props.overview;\n  if (props.release_date) releaseDate = props.release_date;\n  if (props.poster) posterPath = props.poster;\n  const posterBaseURL = \"http://image.tmdb.org/t/p/w185_and_h278_bestv2/\";\n\n  const handleMediaPage = event => {\n    event.preventDefault();\n    fetch(\"/api/addTitle?id=\" + id + \"&type=\" + type).then(res => {\n      if (res.status === 200) {\n        props.history.push(\"/media?id=\" + id + \"&type=\" + type);\n      } else if (res.status === 202) {\n        props.history.push(\"/media?id=\" + id + \"&type=\" + type);\n      } else if (res.status === 500) {\n        alert(\"Error: Insufficient information for title. Available only as a search result.\");\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).catch(err => {\n      console.error(err);\n      alert('Error navigating to title\\'s page. Please try again.');\n    });\n  };\n\n  return React.createElement(Card, {\n    style: cardStyle,\n    className: \"card text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Card.Header, {\n    style: cardHeaderStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: handleMediaPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Card.Img, {\n    variant: \"top\",\n    style: cardImageStyle,\n    src: posterBaseURL + posterPath,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }))), React.createElement(Card.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Card.Title, {\n    style: cardTitleStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, title, \" (\", releaseDate.length > 4 ? releaseDate.substring(0, 4) : \"\", \")\"), React.createElement(Card.Text, {\n    style: cardTextStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, overview.length < 100 ? overview : overview.substring(0, 96) + \"...\")), React.createElement(Card.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, loggedIn ? React.createElement(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Add to list\") : void 0)));\n};\n\nconst cardStyle = {\n  backgroundColor: '#212121'\n};\nconst cardHeaderStyle = {\n  backgroundColor: 'whitesmoke'\n};\nconst cardImageStyle = {\n  width: '185px',\n  height: '278px'\n};\nconst cardTitleStyle = {\n  color: 'whitesmoke',\n  height: '65px'\n};\nconst cardTextStyle = {\n  color: 'lightgrey',\n  height: '40px'\n};\nexport default withRouter(ResultCard);","map":{"version":3,"sources":["/Users/miguel/Documents/Github/Media-Tracker/client/src/components/ResultCard.js"],"names":["React","Card","Button","withRouter","useState","useEffect","ResultCard","props","loggedIn","setLoggedIn","username","setUsername","id","type","title","overview","releaseDate","posterPath","fetch","credentials","then","res","status","json","data","catch","err","handleLogout","event","preventDefault","history","push","error","Error","console","alert","release_date","poster","posterBaseURL","handleMediaPage","cardStyle","cardHeaderStyle","cursor","cardImageStyle","cardTitleStyle","length","substring","cardTextStyle","backgroundColor","width","height","color"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Card, Button } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\n\nconst ResultCard = props => {\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [username, setUsername] = useState(\"\");\n    let id = -1;\n    let type = \"\";\n    let title = \"\";\n    let overview = \"\";\n    let releaseDate = \"\";\n    let posterPath = \"\";\n\n    // if logged in redirect to profile\n    fetch(\"/api/getUserDetails\", { credentials: 'include' })\n        .then(res => {\n            if (res.status === 200) {\n                setLoggedIn(true);\n                return res.json();\n            }\n        }).then(data => {\n            setUsername(data.username);\n        })\n        .catch(err => {\n            // user not logged in, or error\n        });\n\n    const handleLogout = event => {\n        event.preventDefault();\n        fetch(\"/api/logout\"\n            , { credentials: 'include' })\n            .then(res => {\n                if (res.status === 200) {\n                    props.history.push('/login');\n                } else {\n                    const error = new Error(res.error);\n                    throw error;\n                }\n            })\n            .catch(err => {\n                console.error(err);\n                alert('Error logging out. Please try again.');\n            });\n    }\n\n    if (props.id)\n        id = props.id;\n    if (props.type)\n        type = props.type;\n    if (props.title)\n        title = props.title;\n    if (props.overview)\n        overview = props.overview;\n    if (props.release_date)\n        releaseDate = props.release_date;\n    if (props.poster)\n        posterPath = props.poster;\n    const posterBaseURL = \"http://image.tmdb.org/t/p/w185_and_h278_bestv2/\";\n\n    const handleMediaPage = (event) => {\n        event.preventDefault();\n        fetch(\"/api/addTitle?id=\" + id + \"&type=\" + type)\n            .then(res => {\n                if (res.status === 200) {\n                    props.history.push(\"/media?id=\" + id + \"&type=\" + type);\n                } else if (res.status === 202) {\n                    props.history.push(\"/media?id=\" + id + \"&type=\" + type);\n                } else if (res.status === 500) {\n                    alert(\"Error: Insufficient information for title. Available only as a search result.\")\n                } else {\n                    const error = new Error(res.error);\n                    throw error;\n                }\n            })\n            .catch(err => {\n                console.error(err);\n                alert('Error navigating to title\\'s page. Please try again.');\n            });\n    };\n\n    return (\n        <Card style={cardStyle} className=\"card text-center\">\n            <Card.Header style={cardHeaderStyle}>\n                <a style={{ cursor: 'pointer' }} onClick={handleMediaPage}>\n                    <Card.Img variant=\"top\" style={cardImageStyle} src={posterBaseURL + posterPath} />\n                </a>\n            </Card.Header>\n            <Card.Body>\n                <Card.Title style={cardTitleStyle}>{title} ({releaseDate.length > 4 ? releaseDate.substring(0, 4) : \"\"})</Card.Title>\n                <Card.Text style={cardTextStyle}>\n                    <i>{overview.length < 100 ? overview : overview.substring(0, 96) + \"...\"}</i>\n                </Card.Text>\n                <Card.Footer>\n                    {loggedIn ?\n                        (<Button>Add to list</Button>)\n                        :\n                        void (0)\n                    }\n                </Card.Footer>\n            </Card.Body>\n        </Card>\n    );\n};\n\nconst cardStyle = {\n    backgroundColor: '#212121'\n};\n\nconst cardHeaderStyle = {\n    backgroundColor: 'whitesmoke'\n};\n\nconst cardImageStyle = {\n    width: '185px',\n    height: '278px',\n};\n\nconst cardTitleStyle = {\n    color: 'whitesmoke',\n    height: '65px'\n};\n\nconst cardTextStyle = {\n    color: 'lightgrey',\n    height: '40px'\n};\n\nexport default withRouter(ResultCard);"]},"metadata":{},"sourceType":"module"}